<!-- Javascript -->
<script type="text/javascript">
  {% if i18n_as_string %}
  var i18n = {{ i18n_as_string | safe }};
  {% endif %}
</script>
<script src="{{ js_path }}"></script>
<script id="govuk-script-analytics" type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var mainWrap = document.getElementsByTagName('main')[0]
    GOVUK.stopDoubleSubmit.init();
    if (mainWrap.classList.contains('charge-new')) {
      {% if cardsAsStrings %}
      window.Card = { allowed: {{ cardsAsStrings | safe }} };
      {% else %}
      window.Card = { allowed: {} };
      {% endif %}
      formValidation();
      showCardType().init();
    } else if (mainWrap.classList.contains('confirm-page')) {
      analyticsTrackConfirmClick().init('{{analytics.analyticsId}}', '{{analytics.type}}', '{{analytics.paymentProvider}}', '{{analytics.amount}}', '{{hitPage}}');
    }
  });
</script>
